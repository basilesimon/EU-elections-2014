<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>European Elections 2014 - Candidates in the news</title>
        <link href="css/bootstrap.min.css" rel="stylesheet" />
        <link href="css/main.css" rel="stylesheet" />
        <script src="js/lib/jquery-1.10.2.min.js"></script>
        <script src="js/lib/bootstrap.min.js"></script>
        <script src="js/lib/juicer-api.js"></script>
        <script src="js/lib/newslabs-api.js"></script>
        <script src="js/lib/chart.js"></script>
        <script src="js/lib/d3.js"></script>
        <script src="js/lib/moment.min.js"></script>
        <script src="js/main.js"></script>
    </head>
    <body>
        <canvas id="myChart" width="400" height="400"></canvas>
        <script>
            //Defining query parameters
            var uri = "http://dbpedia.org/resource/Nigel_Farage";

            var articles = [];
            var labels = [];
            for (var i = 0; i <= 30; i++) {
                var startDate = moment().subtract('days', i).format('YYYY-MM-DD');
                var response = newslabsApi.findConceptCoOccurrences(uri, 'http://dbpedia.org/ontology/Person', 1, startDate);
                articles.push( parseInt( response["co-occurrences"][0].occurrence ) );
                labels.push(startDate);
            }
            console.log(articles);
            //chart.js definition
            var ctx = document.getElementById("myChart").getContext("2d");
            var boudin = {
                labels : labels,
                    datasets : [
                    {
                        fillColor : "rgba(220,220,220,0.5)",
                        strokeColor : "rgba(220,220,220,1)",
                        pointColor : "rgba(220,220,220,1)",
                        pointStrokeColor : "#fff",
                        data : articles  //yeah!
                    }
                ]
            }
            var myNewChart = new Chart(ctx).Line(boudin);
        </script>
    </body>
</html>
